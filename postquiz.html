<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Post Module Sextortion Quiz</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f7f9fa; color: #333; }
    h1 { text-align: center; }
    .timer { font-size: 18px; color: #1976d2; font-weight: bold; text-align: center; margin-bottom: 20px; }
    form { max-width: 800px; margin: 0 auto; }
    .info-fields input { padding: 10px; margin: 10px; font-size: 16px; width: 250px; }
    .question { margin: 20px 0; padding: 15px; background: #fff; border-left: 5px solid #4CAF50; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    textarea { width: 100%; padding: 10px; font-size: 16px; margin-top: 10px; }
    button { background: #4CAF50; color: white; padding: 12px 24px; font-size: 16px; border: none; cursor: pointer; display: block; margin: 30px auto; }
    button:hover { background-color: #45a049; }
    input[type="radio"] { margin-right: 10px; }
  </style>
</head>
<body>
  <h1>Sextortion Awareness Quiz</h1>
  <div class="timer" id="timer">Time Elapsed: 00:00</div>

  <form id="quizForm">
    <div class="info-fields" style="text-align: center;">
      <input type="text" id="name" placeholder="Your Name" required />
      <input type="email" id="email" placeholder="Your Email" required />
    </div>

    <!-- 1 -->
    <div class="question">
      <p><strong>1.</strong> What makes sextortion different from traditional blackmail?</p>
      <label><input type="radio" name="q1" value="A"> It uses legal evidence</label><br />
      <label><input type="radio" name="q1" value="B"> It involves public figures only</label><br />
      <label><input type="radio" name="q1" value="C"> It typically involves intimate digital content</label><br />
      <label><input type="radio" name="q1" value="D"> It targets financial institutions</label>
    </div>

    <!-- 2 -->
    <div class="question">
      <p><strong>2.</strong> Why might someone hesitate to report sextortion?</p>
      <textarea name="q2" rows="4" placeholder="Describe what emotions or concerns could stop someone from reporting..."></textarea>
    </div>

    <!-- 3 -->
    <div class="question">
      <p><strong>3.</strong> Which message is most likely part of a sextortion scam?</p>
      <label><input type="radio" name="q3" value="A"> “Your account has been suspended.”</label><br />
      <label><input type="radio" name="q3" value="B"> “We have access to your camera and will expose you.”</label><br />
      <label><input type="radio" name="q3" value="C"> “You’ve won a free vacation.”</label><br />
      <label><input type="radio" name="q3" value="D"> “Confirm your email address.”</label>
    </div>

    <!-- 4 -->
    <div class="question">
      <p><strong>4.</strong> What kind of language do scammers often use in sextortion?</p>
      <textarea name="q4" rows="4" placeholder="Reflect on how scammers try to create fear or urgency..."></textarea>
    </div>

    <!-- 5 -->
    <div class="question">
      <p><strong>5.</strong> What is a good digital habit to help prevent sextortion?</p>
      <label><input type="radio" name="q5" value="A"> Share passwords with friends</label><br />
      <label><input type="radio" name="q5" value="B"> Ignore privacy settings</label><br />
      <label><input type="radio" name="q5" value="C"> Avoid clicking suspicious links</label><br />
      <label><input type="radio" name="q5" value="D"> Use the same password for all accounts</label>
    </div>

    <!-- 6 -->
    <div class="question">
      <p><strong>6.</strong> How can you protect your digital content from being misused?</p>
      <label><input type="radio" name="q6" value="A"> Use public Wi-Fi often</label><br />
      <label><input type="radio" name="q6" value="B"> Regularly back up content</label><br />
      <label><input type="radio" name="q6" value="C"> Limit who has access to private content</label><br />
      <label><input type="radio" name="q6" value="D"> Disable browser pop-ups</label>
    </div>

    <!-- 7 -->
    <div class="question">
      <p><strong>7.</strong> Who can support a victim of sextortion?</p>
      <label><input type="radio" name="q7" value="A"> Classmates without training</label><br />
      <label><input type="radio" name="q7" value="B"> Online fan pages</label><br />
      <label><input type="radio" name="q7" value="C"> Trusted adults or reporting agencies</label><br />
      <label><input type="radio" name="q7" value="D"> Social media influencers</label>
    </div>

    <!-- 8 -->
    <div class="question">
      <p><strong>8.</strong> What would make reporting sextortion feel safer for a victim?</p>
      <textarea name="q8" rows="4" placeholder="Think about what kind of environment or response helps people feel safe..."></textarea>
    </div>

    <!-- 9 -->
    <div class="question">
      <p><strong>9.</strong> What should a bystander NOT do in sextortion cases?</p>
      <label><input type="radio" name="q9" value="A"> Offer support privately</label><br />
      <label><input type="radio" name="q9" value="B"> Contact the school or authorities</label><br />
      <label><input type="radio" name="q9" value="C"> Mock the victim on social media</label><br />
      <label><input type="radio" name="q9" value="D"> Share reporting resources</label>
    </div>

    <!-- 10 -->
    <div class="question">
      <p><strong>10.</strong> How can someone help a peer without making the situation worse?</p>
      <textarea name="q10" rows="4" placeholder="Write a respectful and helpful way someone could support a peer..."></textarea>
    </div>

    <button type="submit">Submit Quiz</button>
  </form>

  <script>
    const correctAnswers = ["C", "", "B", "", "C", "C", "C", "", "C", ""];

    let secondsElapsed = 0;
    const timerDisplay = document.getElementById("timer");
    const interval = setInterval(() => {
      secondsElapsed++;
      const minutes = Math.floor(secondsElapsed / 60);
      const seconds = secondsElapsed % 60;
      timerDisplay.textContent = `Time Elapsed: ${minutes}:${seconds.toString().padStart(2, "0")}`;
    }, 1000);

    function downloadResultsAsCSV(data) {
      const csvHeader = "Name,Email,Score,TimeTaken,WrongAnswers,OpenQ2,OpenQ4,OpenQ8,OpenQ10,Timestamp\\n";
      const csvRow = `${data.name},${data.email},${data.score},${data.timeTaken},"${data.wrongAnswers.join(';')}","${data.openQ2}","${data.openQ4}","${data.openQ8}","${data.openQ10}",${data.timestamp}\\n`;
      const blob = new Blob([csvHeader + csvRow], { type: "text/csv" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "quiz_result.csv";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    document.getElementById("quizForm").addEventListener("submit", function (e) {
      e.preventDefault();
      clearInterval(interval);

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      if (!name || !email) {
        alert("Please enter your name and email.");
        return;
      }

      let score = 0;
      let wrong = [];

      for (let i = 1; i <= correctAnswers.length; i++) {
        if (correctAnswers[i - 1] !== "") {
          const selected = document.querySelector(`input[name="q${i}"]:checked`);
          if (selected && selected.value === correctAnswers[i - 1]) {
            score++;
          } else {
            wrong.push(i);
          }
        }
      }

      const minutes = Math.floor(secondsElapsed / 60);
      const seconds = secondsElapsed % 60;
      const timeTaken = `${minutes}m ${seconds}s`;

      const quizData = {
        name: name,
        email: email,
        score: score,
        timeTaken: timeTaken,
        wrongAnswers: wrong,
        openQ2: document.querySelector('textarea[name="q2"]').value.trim(),
        openQ4: document.querySelector('textarea[name="q4"]').value.trim(),
        openQ8: document.querySelector('textarea[name="q8"]').value.trim(),
        openQ10: document.querySelector('textarea[name="q10"]').value.trim(),
        timestamp: new Date().toISOString()
      };

      downloadResultsAsCSV(quizData);

      setTimeout(() => {
        window.location.href = "conclusion.html";
      }, 500);
    });
  </script>
</body>
</html>
