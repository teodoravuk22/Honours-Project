<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sextortion Awareness Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <h1>Sextortion Awareness Quiz</h1>

  <div id="timer">Time Elapsed: 0m 0s</div>

  <form id="quizForm">
    <label for="name">Name:</label><br />
    <input type="text" id="name" name="name" required /><br /><br />

    <label for="email">Email:</label><br />
    <input type="email" id="email" name="email" required /><br /><br />

    <!-- Q1 (Harder) -->
    <p>1. Which characteristic most accurately distinguishes sextortion from other forms of blackmail?</p>
    <input type="radio" name="q1" value="A" /> It typically involves legally obtained evidence<br />
    <input type="radio" name="q1" value="B" /> It usually targets public figures for financial gain<br />
    <input type="radio" name="q1" value="C" /> It exploits digital intimacy and personal vulnerability<br />
    <input type="radio" name="q1" value="D" /> It’s mostly carried out by organized crime groups<br /><br />

    <!-- Q2 (Open) -->
    <p>2. Why might someone hesitate to report sextortion?</p>
    <textarea name="q2" required></textarea><br /><br />

    <!-- Q3 (Harder) -->
    <p>3. Which message most strongly suggests a potential sextortion threat?</p>
    <input type="radio" name="q3" value="A" /> “We noticed suspicious activity…”<br />
    <input type="radio" name="q3" value="B" /> “We have access to your camera…”<br />
    <input type="radio" name="q3" value="C" /> “You’ve won a gift card!”<br />
    <input type="radio" name="q3" value="D" /> “Your subscription will renew…”<br /><br />

    <!-- Q4 -->
    <p>4. What kind of language do scammers often use in sextortion?</p>
    <textarea name="q4" required></textarea><br /><br />

    <!-- Q5 (Harder) -->
    <p>5. Which of these practices most effectively reduces the risk of being targeted in a sextortion scheme?</p>
    <input type="radio" name="q5" value="A" /> Reusing passwords<br />
    <input type="radio" name="q5" value="B" /> Disabling location services<br />
    <input type="radio" name="q5" value="C" /> Avoiding suspicious links<br />
    <input type="radio" name="q5" value="D" /> Using encrypted apps<br /><br />

    <!-- Q6 (Harder) -->
    <p>6. What is a sound strategy to minimize misuse of digital content?</p>
    <input type="radio" name="q6" value="A" /> Shared drives with passwords<br />
    <input type="radio" name="q6" value="B" /> Review privacy settings<br />
    <input type="radio" name="q6" value="C" /> Cloud backups<br />
    <input type="radio" name="q6" value="D" /> Antivirus software<br /><br />

    <!-- Q7 (Harder) -->
    <p>7. Who is most reliable for support in a sextortion case?</p>
    <input type="radio" name="q7" value="A" /> Classmates<br />
    <input type="radio" name="q7" value="B" /> Anonymous forums<br />
    <input type="radio" name="q7" value="C" /> Official reporting agencies<br />
    <input type="radio" name="q7" value="D" /> Mental health influencers<br /><br />

    <!-- Q8 -->
    <p>8. What would make reporting sextortion feel safer?</p>
    <textarea name="q8" required></textarea><br /><br />

    <!-- Q9 (Harder) -->
    <p>9. Which action would most likely escalate harm in a sextortion case?</p>
    <input type="radio" name="q9" value="A" /> Anonymous report<br />
    <input type="radio" name="q9" value="B" /> Private support<br />
    <input type="radio" name="q9" value="C" /> Public sarcasm<br />
    <input type="radio" name="q9" value="D" /> Sharing resources<br /><br />

    <!-- Q10 -->
    <p>10. How can someone help a peer without making things worse?</p>
    <textarea name="q10" required></textarea><br /><br />

    <input type="submit" value="Submit Quiz" />
  </form>

  <script>
    let minutes = 0;
    let seconds = 0;
    const timer = document.getElementById("timer");

    setInterval(() => {
      seconds++;
      if (seconds >= 60) {
        minutes++;
        seconds = 0;
      }
      timer.textContent = `Time Elapsed: ${minutes}m ${seconds}s`;
    }, 1000);

    function downloadCSV(data) {
      const csvHeader = "Name,Email,Score,TimeTaken,WrongAnswers,Q1,Q2,Q3,Q4,Q5,Q6,Q7,Q8,Q9,Q10,Timestamp\\n";
      const csvRow = `${data.name},${data.email},${data.score},${data.time},"${data.wrong.join(';')}",` +
        `"${data.q1}","${data.q2}","${data.q3}","${data.q4}","${data.q5}","${data.q6}","${data.q7}","${data.q8}","${data.q9}","${data.q10}",${data.timestamp}\\n`;

      const blob = new Blob([csvHeader + csvRow], { type: "text/csv" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "quiz_result.csv";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    document.getElementById("quizForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const correctAnswers = ["C", "", "B", "", "C", "B", "C", "", "C", ""];
      let score = 0;
      let wrong = [];

      for (let i = 1; i <= 10; i++) {
        const input = document.querySelector(`input[name="q${i}"]:checked`) || document.querySelector(`textarea[name="q${i}"]`);
        const val = input ? input.value.trim() : "";
        if (correctAnswers[i - 1] && val === correctAnswers[i - 1]) {
          score++;
        } else if (correctAnswers[i - 1] !== "") {
          wrong.push(i);
        }
      }

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const timeTaken = `${minutes}m ${seconds}s`;
      const now = new Date().toISOString();

      const quizData = {
        name,
        email,
        score,
        time: timeTaken,
        wrong,
        q1: document.querySelector('input[name="q1"]:checked')?.nextSibling.textContent.trim() || "",
        q2: document.querySelector('textarea[name="q2"]').value.trim(),
        q3: document.querySelector('input[name="q3"]:checked')?.nextSibling.textContent.trim() || "",
        q4: document.querySelector('textarea[name="q4"]').value.trim(),
        q5: document.querySelector('input[name="q5"]:checked')?.nextSibling.textContent.trim() || "",
        q6: document.querySelector('input[name="q6"]:checked')?.nextSibling.textContent.trim() || "",
        q7: document.querySelector('input[name="q7"]:checked')?.nextSibling.textContent.trim() || "",
        q8: document.querySelector('textarea[name="q8"]').value.trim(),
        q9: document.querySelector('input[name="q9"]:checked')?.nextSibling.textContent.trim() || "",
        q10: document.querySelector('textarea[name="q10"]').value.trim(),
        timestamp: now
      };

      downloadCSV(quizData);

      const encodedName = encodeURIComponent(name);
      const encodedTime = encodeURIComponent(timeTaken);
      window.location.href = `instructions.html?name=${encodedName}&score=${score}&time=${encodedTime}&wrong=${wrong.join(",")}`;
    });
  </script>
</body>
</html>
